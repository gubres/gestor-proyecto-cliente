<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Welcome!{% endblock %}</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>:círculo_negro:️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <link href="https://cdn.datatables.net/v/dt/dt-2.0.2/datatables.min.css" rel="stylesheet">
   
    <link href="https://cdn.datatables.net/v/dt/jszip-3.10.1/dt-2.0.3/b-3.0.1/b-html5-3.0.1/b-print-3.0.1/sl-2.0.0/datatables.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://cdn.datatables.net/v/dt/jszip-3.10.1/dt-2.0.3/b-3.0.1/b-html5-3.0.1/b-print-3.0.1/sl-2.0.0/datatables.min.css" rel="stylesheet">

    {% block stylesheets %}

    <style>
            .priority-circle {
                display: inline-block;
                width: 20px;
                height: 20px;
                border-radius: 50%;
                margin-right: 5px;
            }

            .priority-high {
                background-color: red;
            }

            .priority-medium {
                background-color: yellow;
            }

            .priority-low {
                background-color: green;
            }
        </style>
    {% endblock %}
</head>
<body>
{% if app.request.attributes.get('_route') != 'app_login' %}
<nav class="navbar bg-body-tertiary fixed-top">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <h4 class="ms-2 fw-bold" id="menuText"></h4>
            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <h2 class="offcanvas-title" id="offcanvasNavbarLabel">
                        <a href="{{ path('app_inicio') }}" class="text-decoration-none text-dark">Inicio</a>
                    </h2>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="{{ path('app_clientes_index') }}"><i class="bi bi-briefcase"></i> Clientes</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{ path('app_proyectos_index') }}"><i class="bi bi-stack"></i> Proyectos</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{ path('app_tareas_index') }}"><i class="bi bi-calendar-range"></i> Tareas</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{ path('app_usuarios_index') }}"><i class="bi bi-people"></i> Usuarios</a></li>
                    </ul>
                    <form class="d-flex mt-3" role="search">
                        <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Buscar">
                    </form>
                </div>
            </div>
        </div>
    </nav>
    <nav class="navbar bg-body-tertiary fixed-bottom">
        <div class="container-fluid justify-content-end">
                {% if app.user %}
                    <class="nav-item">
                        <a class="navbar-brand" href="{{ path('app_logout') }}">
                            Cerrar sesión ({{ app.user.email }})
                        </a>
                {% endif %}
        </div>
    </nav>
{% endif %}
{% block body %}
<div id="global-buttons">
    {% include 'botones_base.html.twig' %}
</div>
    <!-- Contenido específico de cada página -->
{% endblock %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/v/dt/dt-2.0.2/datatables.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<!-- para la selección múltiple y los botones pdf y excel -->
<script src="https://cdn.datatables.net/v/dt/jszip-3.10.1/dt-2.0.3/b-3.0.1/b-html5-3.0.1/b-print-3.0.1/sl-2.0.0/datatables.min.js"></script>
<!-- para los gráficos de la pantalla de inicio -->
<script src="https://code.highcharts.com/highcharts.js"></script>
<script>
        // Obtiene la ruta actual de la página
        var currentPage = "{{ app.request.attributes.get('_route') }}";
        // Mapea las rutas a los textos correspondientes
        var routeToTextMap = {
            'app_inicio': 'Inicio',
            'app_proyectos_index': 'Proyectos',
            'app_usuarios_index': 'Usuarios',
            'app_tareas_index': 'Tareas',
            'app_clientes_index': 'Clientes'
            
        };
        // Actualiza el texto del menú
        if (routeToTextMap[currentPage]) {
            document.getElementById('menuText').innerText = routeToTextMap[currentPage];
        }
        // Actualiza el título de la barra de navegación cuando se hace clic en un enlace
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                // Solo actualiza el título si el enlace hace referencia a la página de proyectos
                if (link.getAttribute('href') === "{{ path('app_proyectos_index') }}") {
                    document.getElementById('navbarTitle').innerText = "Proyectos";
                }
            });
        });
    </script>
{% block javascripts %}
           
{% endblock %}
</body>
</html>




